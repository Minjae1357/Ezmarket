<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <script>
        function additems() {
            var data = $('#addForm').serialize();

            $.ajax({
                url: '/items/additems', 
                type: 'post',
                data: data,
                dataType: 'json',
                success: function(res) {
                    alert(res.result ? '저장 성공' : '저장 실패'); 
                    location.href="http://localhost/sec/menu"
                }
            });

            return false; // 폼 제출을 막기 위해 false를 반환
        }
    </script>
    <title>게시글 작성</title>
</head>
<body>
    <main>
        <form id="addForm" method="post" onsubmit="return additems()">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <label for="pname">게임이름:</label>
            <input type="text" id="pname" name="pname">.
            <br>
            <label for="pmaker">회사:</label>
            <input type="text" id="pmaker" name="pmaker"></textarea>
            <br>
        	<label for="price">가격:</label>
            <input type="number" id="price" name="price"></input>
            <br>
            <button type="submit">게임 등록</button>
        </form>
    </main>
</body>
</html>
